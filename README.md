# highload_VK
Проект по курсу "Проектирование высоконагруженных систем" VK Education в МГТУ.

## 1. Тема и целевая аудитория 
**ВКонтакте**  — российская социальная сеть. 

### Целевая аудитория
**ВКонтакте** имеет более 105 миллионов активных пользователей в месяц[1].

| **Страна**              | **Количество пользователей в месяц, млн** |
| ----------------------- | ----------------------------------------- |
| Россия                  | 90 (Данные за 2024г.[2])                  |
| Беларусь                | 2,8 (Данные за 2023г.[3])                 |
| Казахстан               | 1,8 (Данные за 2019г.[4])                 |

### Ключевой функционал (MVP)
- Регистрация/Авторизация
- Сообщества (CRUD)
- Друзья (добавление/общение)
- Чаты (базовый функционал: написать сообщение, переслать)
- Посты (CRUD от сообщества и от человека)
- Лента рекомендаций
- Поиск (постов/сообществ/друзей)
- Комментирование (постов и комментариев)
- Реакции (постов и комментариев)
- Репосты (переслать пост/комментарий, сохранить в избранное)

### Ключевые продуктовые решения
- Настройки конфиденциальности
- Работа с медиа контентом

### Список источников
1. https://ria.ru/20230618/vkontakte-1878955016.html
2. https://vk.company/ru/press/releases/11757/
3. https://vk.company/ru/press/releases/11664/
4. https://tengrinews.kz/internet/nazvana-samaya-populyarnaya-sotsialnaya-set-v-kazahstane-377526/

## 2. Расчет нагрузки

### Продуктовые метрики
* Месячная аудитория(MAU) - 105 млн[1]
* Дневная аудитория(DAU) - 60 млн[1]

#### Средний размер хранилища пользователя
- Сообщения:
<br/>
В среднем пользователи отправляют около **22,5 млн** сообщений в день[2].
Если предположить, что каждое сообщение занимает в среднем 1 КБ данных, то общее количество данных от сообщений будет:
**22,5 млн сообщений/день × 1 КБ = 22,5 ГБ**
<br/>
**22,5 ГБ / 60 млн = 1 КБ** на пользователя в день
<br/>
**1 КБ * 365 дней * 11 лет = 4 МБ** на пользователя за 11 лет

- Посты и комментарии:
<br/>
В марте 2022 года пользователи ВКонтакте опубликовали более **468 млн** постов и комментариевх[3].
Если предположить, что каждый пост занимает в среднем 1 КБ данных, то общее количество данных от постов будет: **468 млн постов × 1 КБ = 468 ГБ**
<br/>
Среднее количество данных на одного пользователя от постов: **468 ГБ / 73,4 млн = 6,4 КБ**
<br/>
**6,4 КБ * 12 месяцев * 11 лет = 1 МБ** на пользователя за 11 лет

- Медиа контент:
<br/>
На основе данных, в летние месяцы 2024 года на платформах VK загружалось до **1 ПБ** контента в день[4].
Среднее количество загружаемого контента на одного пользователя в день:
**1,000,000 ГБ / 3 / 76,900,000 пользователей​  = 4,4 МБ** на пользователя в день
<br/>
**4,4 МБ * 365 дней * 11 лет = 17 ГБ** на пользователя за 11 лет

| **Тип**                 | **Средний объем на 1 пользователя**       |
| ----------------------- | ----------------------------------------- |
| Сообщения               | 4 МБ                                      |
| Посты и комментарии     | 1 МБ                                      |
| Медиа контент           | 17 ГБ                                     |

#### Среднее количество действий пользователя по типам в день

| **Тип**                 | **Среднее количество на 1 пользователя в день**|
| ----------------------- | -----------------------------------------      |
| Сообщения               | 55 [5]                                         |
| Комментарии             | 5 [6]                                          |
| Лайки(реакции)          | 20 [5]                                         |
| Просмотры постов        | 100 [5]                                        |
| Размещение постов       | 1 [5]                                          |
| Репосты                 | 3 [7]                                          |
| Поисковые запросы       | 5 [7]                                          |

### Технические метрики

#### Размер хранения в разбивке по типам данных 

В 2014 году ВКонтакте хранила около **250 ПБ**[8] данных. С тех пор количество пользователей и активность на платформе значительно увеличились. Если предположить, что объем данных растет пропорционально количеству пользователей и активности, можно сделать приблизительную оценку. Допустим, что объем данных увеличивается на 10-15% ежегодно. За 10 лет (с 2014 по 2024 год) это приведет к увеличению объема данных примерно в 2,6-4 раза. Таким образом, в 2024 году ВКонтакте может хранить около **1000 ПБ** пользовательских данных.

Можно ожидать, что объем данных увеличивается на **30 ПБ** ежегодно.

| **Тип**                 | **Объем хранилища, ТБ**      | **Прирост в год, ТБ** |
| ----------------------- | -----------------------------| --------------------- |
| Сообщения               | 235                          |  7                    |
| Посты и комментарии     | 60                           |  2                    |
| Медиа контент           | 999_705                      |  29_991               |

#### Сетевой трафик

| **Тип**         | **RPS средний** | **RPS пиковый**|Пиковое потребление в теченнии суток (в Гбит/с)|Суммарный суточный (Гбайт/сутки)|
| ----------------------- | ----------------|----------------|----------------                                |----------------|
| Сообщения               | 39_000          | 65_000         |                                                |                |
| Комментарии             | 3_000           | 6_000          |                                                |                |
| Лайки(реакции)          | 18_800          | 23_000         |                                                |                |
| Просмотры постов        | 4_200           | 7_0000         |                                                |                |
| Размещение постов       | 690             | 1_150          |                                                |                |
| Репосты                 | 2_100           | 3_500          |                                                |                |
| Поисковые запросы       | 3_000           | 5_000          |                                                |                |

### Список источников
1. https://corp.vkcdn.ru/media/2023/05/15/vk-company-limited-4-2022.pdf
2. https://brandanalytics.ru/blog/social-media-russia-2021/
3. https://m.vk.com/press/q1-2022-results
4. https://vk.company/ru/press/releases/11834/
5. https://vk.com/@live-stat
6. https://vc.ru/marketing/168366-statistika-vo-vkontakte-kak-i-kakie-pokazateli-otslezhivat-kak-povysit-ih-dinamiku
7. https://m.vk.com/wall-39599132_361495
8. https://vk.com/wall-32295218_252849?offset=60
